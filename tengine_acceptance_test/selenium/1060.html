<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://localhost/" />
<title>1060</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">1060</td></tr>
</thead><tbody>
<!--事前処理-->
<tr>
	<td>open</td>
	<td>/tengine/test/scripts</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>link=スクリプト一覧</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=script_kind</td>
	<td>label=eval</td>
</tr>
<tr>
	<td>type</td>
	<td>id=script_code</td>
	<td>Tengine::Test::Script.delete_all <br />Tengine::Job::Execution.delete_all <br />Tengine::Job::RootJobnetActual.delete_all</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=script_code</td>
	<td>bundle exec tengined -k stop</td>
</tr>
<tr>
	<td>select</td>
	<td>id=script_kind</td>
	<td>label=system</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=script_code</td>
	<td>bundle exec tengined -k force_stop</td>
</tr>
<tr>
	<td>select</td>
	<td>id=script_kind</td>
	<td>label=system</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>id=script_kind</td>
	<td>label=system</td>
</tr>
<tr>
	<td>type</td>
	<td>id=script_code</td>
	<td>rm tmp/tengined_status/*</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<!--tenginedを起動-->
<tr>
	<td>type</td>
	<td>id=script_code</td>
	<td>bundle exec tengined -T&nbsp;&nbsp;usecases/job/dsl/1060_jobnet_directory -f ./features/config/tengined.yml.erb</td>
</tr>
<tr>
	<td>select</td>
	<td>id=script_kind</td>
	<td>label=spawn</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=script_code</td>
	<td>require 'timeout'<br />results = []<br />timeout(30) do<br />&nbsp;&nbsp;loop do<br />&nbsp;&nbsp;&nbsp;&nbsp;results &lt;&lt; result = `bundle exec tengined -k status`<br />&nbsp;&nbsp;&nbsp;&nbsp;break if result.split(&quot;\n&quot;).any?{|line| line =~ /running/}<br />&nbsp;&nbsp;end<br />end<br />results</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>running</td>
	<td></td>
</tr>
<!--ルートのカテゴリの子に"1060_jobnet_directory"というカテゴリが存在すること-->
<tr>
	<td>clickAndWait</td>
	<td>link=テンプレートジョブ一覧</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementPresent</td>
	<td>//a[text()='全体']/../..//a[text()='1060_jobnet_directory']</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementPresent</td>
	<td>//a[text()='1060_jobnet_directory']/../..//a[text()='jobnetgroup_x']</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementPresent</td>
	<td>//a[text()='1060_jobnet_directory']/../..//a[text()='jobnetgroup_y']</td>
	<td></td>
</tr>
<!--"全体"のカテゴリを選択すると以下の行が表示されること-->
<tr>
	<td>clickAndWait</td>
	<td>//a[text()='全体']</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[2]</td>
	<td>jobnet1060_a</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[3]</td>
	<td>jobnet1060_a</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[2]</td>
	<td>jobnet1060_b</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[3]</td>
	<td>jobnet1060_b</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[2]</td>
	<td>jobnet1060_c</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[3]</td>
	<td>jobnet1060_c</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[4]/td[2]</td>
	<td>jobnet1060_d</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[4]/td[3]</td>
	<td>jobnet1060_d</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[5]/td[2]</td>
	<td>jobnet1060_e</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[5]/td[3]</td>
	<td>jobnet1060_e</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[6]/td[2]</td>
	<td>jobnet1060_f</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[6]/td[3]</td>
	<td>jobnet1060_f</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[7]/td[2]</td>
	<td>jobnet1060_g</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[7]/td[3]</td>
	<td>jobnet1060_g</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[8]/td[2]</td>
	<td>jobnet1060_h</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[8]/td[3]</td>
	<td>jobnet1060_h</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[9]/td[2]</td>
	<td>jobnet1060_i</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[9]/td[3]</td>
	<td>jobnet1060_i</td>
</tr>
<!--"1060_jobnet_directory"のカテゴリを選択すると以下の行が表示されること-->
<tr>
	<td>clickAndWait</td>
	<td>//a[text()='全体']/../..//a[text()='1060_jobnet_directory']</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[2]</td>
	<td>jobnet1060_a</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[3]</td>
	<td>jobnet1060_a</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[2]</td>
	<td>jobnet1060_b</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[3]</td>
	<td>jobnet1060_b</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[2]</td>
	<td>jobnet1060_c</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[3]</td>
	<td>jobnet1060_c</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[4]/td[2]</td>
	<td>jobnet1060_d</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[4]/td[3]</td>
	<td>jobnet1060_d</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[5]/td[2]</td>
	<td>jobnet1060_e</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[5]/td[3]</td>
	<td>jobnet1060_e</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[6]/td[2]</td>
	<td>jobnet1060_f</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[6]/td[3]</td>
	<td>jobnet1060_f</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[7]/td[2]</td>
	<td>jobnet1060_g</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[7]/td[3]</td>
	<td>jobnet1060_g</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[8]/td[2]</td>
	<td>jobnet1060_h</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[8]/td[3]</td>
	<td>jobnet1060_h</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[9]/td[2]</td>
	<td>jobnet1060_i</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[9]/td[3]</td>
	<td>jobnet1060_i</td>
</tr>
<!--"jobnetgroup_x"のカテゴリを選択すると以下の行が表示されること-->
<tr>
	<td>clickAndWait</td>
	<td>//a[text()='1060_jobnet_directory']/../..//a[text()='jobnetgroup_x']</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[2]</td>
	<td>jobnet1060_d</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[3]</td>
	<td>jobnet1060_d</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[2]</td>
	<td>jobnet1060_e</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[3]</td>
	<td>jobnet1060_e</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[2]</td>
	<td>jobnet1060_f</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[3]</td>
	<td>jobnet1060_f</td>
</tr>
<!--"jobnetgroup_y"のカテゴリを選択すると以下の行が表示されること-->
<tr>
	<td>clickAndWait</td>
	<td>//a[text()='1060_jobnet_directory']/../..//a[text()='jobnetgroup_y']</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[2]</td>
	<td>jobnet1060_g</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[1]/td[3]</td>
	<td>jobnet1060_g</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[2]</td>
	<td>jobnet1060_h</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[2]/td[3]</td>
	<td>jobnet1060_h</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[2]</td>
	<td>jobnet1060_i</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//table/tbody/tr[3]/td[3]</td>
	<td>jobnet1060_i</td>
</tr>

</tbody></table>
</body>
</html>
