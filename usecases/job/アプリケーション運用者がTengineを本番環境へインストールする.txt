ユースケース名:
  アプリケーション運用者がTengineを本番環境へインストールする

背景:
  アプリケーション開発者が作成したジョブネット定義を実運用するために、Tengineを本番環境にインストールする

概要:
  アプリケーション運用者がTengineを動かすためのパッケージとTengineコアとTengineコンソールのインストールおよびセットアップを行った後、
  Tengineコアが提供するテスト起動及び、ジョブテスト起動を使用することでTengineコア・エージェントが正常に動作するための準備が完了したことを確認する

  アプリケーション運用者がインストールおよびセットアップを行う中で問題が発生した場合、ドキュメントを参考に問題の解決を試みるが、
  それでも解決しない場合はTengineのサポート窓口やTengineユーザグループへ問い合わせを行う
  なお、問い合わせを行う際には、問題が発生したサーバにインストールされているパッケージとサーバの構成情報を添える。
  Tengineでは、これをサポートする「サーバ構成レポート収集ツール」を提供する

  Tengineのジョブ機能を使用するには、上記のコア機能の導入に加えてジョブ実行サーバにTengineジョブエージェントをインストールする必要がある。
  また、仮想サーバの制御を行うために、仮想サーバ基盤の導入およびTengineとの連携の設定も行う必要がある。

事前条件:
  ジョブネット定義を配置する任意のストレージ、SCM、DB、キュー、仮想サーバ基盤、Tengineコア、Tengineコンソール、Tengineジョブエージェントを使用およびインストールする対象となる全てのサーバが以下の条件を満たしている
    * ハードウェアの準備（電源接続、ケーブル配線、システムBIOS初期設定、ファームウェアのアップデート）が完了している
    * OSのインストールが完了している
    * ネットワークの接続が完了している

成功時保証:
  TengineコンソールサーバでTengineコンソールが停止していること
  全てのTengineコアサーバでTengineコアが停止していること
  ジョブ実行サーバでTengineジョブエージェントが停止していること
  キューサーバでキューのプロセスが停止していること
  DBサーバでDBのプロセスが停止していること
  仮想サーバ基盤サーバで仮想サーバ基盤のプロセスが停止していること

最低保証:
  なし

登場するパッケージ:
  SCM
  DB
  キュー
  仮想サーバ基盤
  Tengineコア
  Tengineコンソール
  Tengineジョブエージェント

登場するコンポーネント:
  テスト起動コマンド
  イベント管理
  ジョブ管理

参照するドキュメント:
  アプリケーション運用者向けTengineマニュアル

基本コース:
1. アプリケーション運用者が運用テスト環境に仮想サーバ基盤をインストールする
2. アプリケーション運用者が運用テスト環境の仮想サーバ基盤をセットアップする
3. アプリケーション運用者が運用テスト環境の仮想サーバ基盤を起動する
4. アプリケーション運用者が運用テスト環境の仮想サーバ基盤のプロセスが起動していることを確認する
5. アプリケーション運用者が運用テスト環境の仮想サーバ基盤の動作確認のために空きリソースを問い合わせる
6. アプリケーション運用者が運用テスト環境の仮想サーバ基盤への問い合わせが成功したことを確認する
7. アプリケーション運用者が運用テスト環境の仮想サーバ基盤へ新しい仮想サーバ作成リクエストを送る
8. アプリケーション運用者が運用テスト環境に新しい仮想サーバが作成されたことを確認する
9. アプリケーション運用者が運用テスト環境に作成した仮想サーバの設定を行う

10. アプリケーション運用者が運用テスト環境に作成した仮想サーバにエージェントをインストールする [代替コースA]
12. アプリケーション運用者が運用テスト環境に作成した仮想サーバのエージェントのセットアップをする
13. アプリケーション運用者が運用テスト環境のTengineコアでジョブテスト起動を実行する [代替コースB]
14. アプリケーション運用者が運用テスト環境でジョブテスト起動が成功することを確認する <戻り点: ジョブテスト起動の成功確認>
15. アプリケーション運用者が運用テスト環境に作成した仮想サーバにエージェントを起動する [代替コースC]
16. アプリケーション運用者が運用テスト環境に作成した仮想サーバのエージェントのプロセスが起動していることを確認する <戻り点: エージェントのプロセスの起動の成功確認>

17. アプリケーション運用者が運用テスト環境に作成した仮想サーバに、ジョブ実行用のスクリプトをセットアップする

代替コースA: エージェントのインストールに失敗する
1. アプリケーション運用者が仮想サーバでエージェントのインストールに失敗する
2. アプリケーション運用者が仮想サーバでエージェントのインストール時の出力結果を確認する
3. アプリケーション運用者が仮想サーバでエージェントのインストール時の出力結果を元に問題を取り除く [代替コースY, 代替コースZ]
4. アプリケーション運用者が仮想サーバでエージェントのインストールを行う
5. <戻り点: Tengineコアプロセスの起動>に遷移する

代替コースB: エージェントのジョブテスト起動に失敗する
1. アプリケーション運用者が仮想サーバでエージェントのジョブテスト起動に失敗する
2. アプリケーション運用者が仮想サーバでエージェントのログを確認する
3. アプリケーション運用者が仮想サーバのエージェントのログを元に問題を取り除く [代替コースY, 代替コースZ]
4. アプリケーション運用者が仮想サーバでジョブテスト起動を行う
5. <戻り点: ジョブテスト起動の成功確認>に遷移する

代替コースC: エージェントの起動に失敗する
1. アプリケーション運用者が仮想サーバでエージェントのジョブテスト起動に失敗する
2. アプリケーション運用者が仮想サーバでエージェントのログを確認する
3. アプリケーション運用者が仮想サーバのエージェントのログを元に問題を取り除く [代替コースY, 代替コースZ]
4. アプリケーション運用者が仮想サーバでジョブテスト起動を行う
5. <戻り点: エージェントプロセスの起動の成功確認>に遷移する

代替コースY: Tengineサポート窓口へ問い合わせる
1. アプリケーション運用者がサーバ構成レポート収集ツールでサーバ構成の内容を収集する
2. アプリケーション運用者がTengineサポート窓口へ問い合わせる
3. ユースケースは終了する

代替コースZ: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がサーバ構成レポート収集ツールでサーバ構成の内容を収集する
2. アプリケーション運用者がTengineユーザグループへ問い合わせる
3. ユースケースは終了する
