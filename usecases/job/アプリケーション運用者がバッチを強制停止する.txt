ユースケース名:
  アプリケーション運用者が分散バッチを強制停止する

背景:
  分散バッチを強制停止する理由としては、ジョブが異常に長い時間動作している場合や、実行するバッチを間違えた場合、投入するデータを間違えた場合等がある。
  強制停止するタイミングは、アプリケーションによって異なるため、バッチがどのような状態でも強制停止をすることができる。

概要:
  アプリケーション運用者は、分散バッチの実行環境が整った後、分散バッチ実行用のジョブネット、
  及びジョブを手動で強制停止することによって、分散バッチを強制停止する。
  このユースケースは{アプリケーション運用者がバッチを実行する}から強制停止に関する代替コースを抜き出したものである。

事前条件:
  分散バッチ実行環境の構築が完了している

成功時保証:
  アプリケーション運用者が分散バッチの強制停止が完了したことを確認できる

最低保証:
  なし

登場する画面:
  テンプレートジョブ一覧画面
  ジョブネット実行設定画面
  実行ジョブ一覧画面

登場するコンポーネント:
  分散バッチ実行用のジョブネット  

登場するパッケージ:

登場するドキュメント:
  アプリケーション運用者向けTengineマニュアル

= runningからdying =

#fork前、ルートジョブネットの最初
代替コースR1_1:retry1のj1を実行中にj1を強制停止
. アプリケーション運用者が実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「強制停止中」になっていることを確認する
. アプリケーション運用者はj1の強制停止が終わるまで待つ
. アプリケーション運用者はj1が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj2,j3,j4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#実行中のジョブ一つで停止
代替コースR1_2:retry1のj1を実行中にルートジョブネットを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「強制停止中」になっていることを確認する
. アプリケーション運用者はj1の強制停止が終わるまで待つ
. アプリケーション運用者はj1が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj2,j3,j4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#実行中のジョブが２つで片方を強制停止_片方強制停止時にもう片方が動いている_もう片方が「正常終了」する
代替コースR1_3:retry1のj2,j3を実行中にj2を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「正常終了」になっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が終わるまで待つ
. アプリケーション運用者はj2が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが実行中(強制停止したジョブあり)になっていることを確認する
. アプリケーション運用者はj3が終わるまで待つ
. アプリケーション運用者はj3が「正常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#実行中のジョブが２つで片方を強制停止_片方強制停止時にもう片方が動いている_もう片方が「異常終了」する
代替コースR1_4:retry1のj2,j3を実行中にj2を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「正常終了」になっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が終わるまで待つ
. アプリケーション運用者はj2が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが実行中(強制停止したジョブあり)になっていることを確認する
. アプリケーション運用者はj3が終わるまで待つ
. アプリケーション運用者はj3が「異常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「異常終了」になっていることを確認する

#実行中のジョブが２つで片方を強制停止_片方強制停止時にもう片方が「正常終了」している
代替コースR1_5:retry1のj2,j3を実行中にj2を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「正常終了」になっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が終わるまで待つ
. アプリケーション運用者はj2が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj3が「正常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#実行中のジョブが２つで片方を強制停止_片方強制停止時にもう片方が「異常終了」している
代替コースR1_6:retry1のj2,j3を実行中にj2を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「正常終了」になっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が終わるまで待つ
. アプリケーション運用者はj2が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj3が「異常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行った「異常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#実行中のジョブが２つで２つとも強制停止
代替コースR1_8:retry1のj2,j3を実行中にルートジョブネットを強制停止
アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「正常終了」になっていることを確認する
. アプリケーション運用者はj2,j3が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2,j3の強制停止が終わるまで待つ
. アプリケーション運用者はj2,j3が「強制停止済み」になっていることを確認する
. アプリケーション運用者はj4が「準備中」になっていることを確認する
. アプリケーション運用者はjn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#join後、ルートジョブネットの最後
代替コースR1_9:retry1のj4を実行中にj4を強制停止
アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1,j2,j3が「正常終了」になっていることを確認する
. アプリケーション運用者はj4が「強制停止中」となっていることを確認する
. アプリケーション運用者はj4の強制停止が終わるまで待つ
. アプリケーション運用者はj4が「強制停止済み」になっていることを確認する
. アプリケーション運用者はjn0004_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#finally_単一指定
代替コースR1_10:retry1のjn0004_fを実行中にjn0004_fを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1,j2,j3,j4が「正常終了」となっていることを確認する
. アプリケーション運用者はjn0004_fが「強制停止中」になっていることを確認する
. アプリケーション運用者はjn0004_fの強制停止が終わるまで待つ
. アプリケーション運用者はjn0004_fが「強制停止済み」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#finally_ルートジョブネット指定
代替コースR1_11:retry1のjn0004_fを実行中にルートジョブネットを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1,j2,j3,j4が「正常終了」となっていることを確認する
. アプリケーション運用者はjn0004_fが「強制停止中」になっていることを確認する
. アプリケーション運用者はjn0004_fの強制停止が終わるまで待つ
. アプリケーション運用者はjn0004_fが「強制停止済み」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

== retry2 ==

#ジョブネットの停止_単一指定_ジョブ
代替コースR2_1:retry2のj2,j41を実行中にj41を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn4,j41が「強制停止中」になっていることを確認する
. アプリケーション運用者はj41の強制停止が終わるまで待つ
. アプリケーション運用者はjn4,j41が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj42,j43,j44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj2が「正常終了」していることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの停止_単一指定_ジョブネット指定でジョブ稼働_稼働中のジョブが一つ_片方強制停止時にもう片方が動いている_もう片方が「正常終了」する
代替コースR2_2:retry2のj2,j41を実行中にjn4を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn4,j41が「強制停止中」になっていることを確認する
. アプリケーション運用者はj41の強制停止が終わるまで待つ
. アプリケーション運用者はjn4,j41が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj42,j43,j44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj2が実行中になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが実行中[強制停止したジョブあり]になっていることを確認する
. アプリケーション運用者はj2が終わるまで待つ
. アプリケーション運用者はj2が「正常終了」していることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの停止_単一指定_ジョブ指定でジョブネット稼働_稼働中のジョブが一つ_片方強制停止時にもう片方が動いている_もう片方が「正常終了」する
代替コースR2_3:retry2のj2,j41を実行中にj2を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn4,j41が実行中になっていることを確認する
. アプリケーション運用者はj42,j43,j44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が終わるまで待つ
. アプリケーション運用者はj2が「強制停止済み」となっていることを確認する
. アプリケーション運用者はjn4,j41が実行中になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが実行中[強制停止したジョブあり]になっていることを確認する
. アプリケーション運用者はj41,j42,j,43,j44,jn4_fが終わるまで待つ
. アプリケーション運用者はjn4が「正常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0005_fjn,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの停止_単一指定_ジョブ指定でジョブネット稼働_稼働中のジョブが一つ_3経路動いているときに1経路目を強制停止、2経路目を「異常終了」,３経路目を「正常終了」
代替コースR2_4:retry2のj2,j41を実行中にj2を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn4,j41が実行中になっていることを確認する
. アプリケーション運用者はj42,j43,j44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が終わるまで待つ
. アプリケーション運用者はj2が「強制停止済み」になっていることを確認する
. アプリケーション運用者はjn4,j41が実行中になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが実行中[強制停止したジョブあり]になっていることを確認する
. アプリケーション運用者はj41が終わるまで待つ
. アプリケーション運用者はjn4,j42,j43が実行中になっていることを確認する
. アプリケーション運用者はj42が「異常終了」になっていることを確認する
. アプリケーション運用者はjn4が「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者はj43が終わるまで待つ
. アプリケーション運用者はj43が「正常終了」になっていることを確認する
. アプリケーション運用者はj44,jn4_fが「準備中」になっていることを確認する
. アプリケーション運用者はjn4が「異常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0005_fjn,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#実行中[異常]が実行中[強制停止したジョブあり]で上書きされないか確認する
#ジョブネットの停止_単一指定_ジョブ指定でジョブネット稼働_稼働中のジョブが一つ_3経路動いているときに1経路目を「異常終了」、2経路目を「正常終了」,３経路目を強制停止
代替コースR2_5:retry2のj2が「異常終了」,「異常終了」したあとにj43を強制停止,その後j42が「正常終了」
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2が「異常終了」になっていることを確認する
. アプリケーション運用者はjn4が「強制停止中」になっていることを確認する
. アプリケーション運用者はj42が実行中になっていることを確認する
. アプリケーション運用者はj44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj43が「強制停止中」になっていることを確認する
. アプリケーション運用者はj43の強制停止が終わるまで待つ
. アプリケーション運用者はj43が「強制停止済み」になっていることを確認する
. アプリケーション運用者はjn4が実行中[強制停止したジョブあり]になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者はj42が終わるまで待つ
. アプリケーション運用者はj42が「正常終了」になっていることを確認する
. アプリケーション運用者はj44,jn4_fが「準備中」になっていることを確認する
. アプリケーション運用者はjn4が実行中「強制停止済み」になっていることを確認する
. アプリケーション運用者はj4,jn0005_fjn,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「異常終了」になっていることを確認する


#ジョブネットの停止_単一指定_ジョブネット指定_稼働中のジョブが2つ
代替コースR2_6:retry2のj2,j42,j43を実行中にjn4を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn4,j42,j43が「強制停止中」になっていることを確認する
. アプリケーション運用者はj41が「正常終了」になっていることを確認する
. アプリケーション運用者はj42,j43の強制停止が終わるまで待つ
. アプリケーション運用者はjn4,j42,j43が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj2が「正常終了」していることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する


#ジョブネットの停止_ルートジョブネット指定_稼働中のジョブが一つ
代替コースR2_7:retry2のj2,j41を実行中にルートジョブネットを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2,jn4,j41が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2,j41の強制停止が終わるまで待つ
. アプリケーション運用者はj2がjn4,j41が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj42,j43,j44,j4,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの停止_ルートジョブネット指定_ジョブネット指定_稼働中のジョブが2つ
代替コースR2_8:retry2のj2,j42,j43を実行中にjn4を強制停止
アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2,jn4が「強制停止中」になっていることを確認する
. アプリケーション運用者はj41が「正常終了」になっていることを確認する
. アプリケーション運用者はj42,j43が「強制停止中」になっていることを確認する
. アプリケーション運用者はj2,j42,j43の強制停止が終わるまで待つ
. アプリケーション運用者はj2,jn4,j42,j43が「強制停止済み」となっていることを確認する
. アプリケーション運用者はj44,j4,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ルートジョブネット内のジョブネットのfinally実行中に強制停止_ジョブネット指定
代替コースR2_9:retry2のjn4_fを実行中にjn4を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2が実行中になっていることを確認する
. アプリケーション運用者はjn4が「強制停止中」になっていることを確認する
. アプリケーション運用者はj41,j42,j43,j44が「正常終了」になっていることを確認する
. アプリケーション運用者はjn4_fが「強制停止中」になっていることを確認する
. アプリケーション運用者はjn4_fの強制停止が終わるまで待つ
. アプリケーション運用者はjn4_fが「強制停止済み」となっていることを確認する
. アプリケーション運用者はj44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ルートジョブネット内のジョブネットのfinally実行中に強制停止_ルートジョブネット
代替コースR2_10:retry2のjn4_fを実行中にルートジョブネットを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2,jn4が「強制停止中」になっていることを確認する
. アプリケーション運用者はj41,j42,j43,j44が「正常終了」になっていることを確認する
. アプリケーション運用者はjn4_fが「強制停止中」になっていることを確認する
. アプリケーション運用者はj2,jn4_fの強制停止が終わるまで待つ
. アプリケーション運用者はjn4_fが「強制停止済み」となっていることを確認する
. アプリケーション運用者はj44,j4,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#finally内finally実行中に強制停止_ジョブ指定
代替コースR2_11:retry2のjn0005_fif実行中にjn0005_fifを強制停止する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2,jn4,j41,j42,j43,j44,jn4_f,j4,jn0005_f1,jn0005_f2が「正常終了」になっていることを確認する
. アプリケーション運用者はjn0005_fifが「強制停止中」になっていることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者はjn0005_fifの強制停止が終わるまで待つ
. アプリケーション運用者はjn0005_fifが「強制停止済み」になること
. アプリケーション運用者はjn0005_fjnが「強制停止済み」になること
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#finally内finally実行中に強制停止_ジョブネット指定
代替コースR2_12:retry2のjn0005_fif実行中にjn0005_fjnを強制停止する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2,jn4,j41,j42,j43,j44,jn4_f,j4が「正常終了」になっていることを確認する
. アプリケーション運用者はjn0005_f1,jn0005_f2が「正常終了」になっていることを確認する
. アプリケーション運用者はjn0005_fifが「強制停止中」になっていることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者はjn0005_fifの強制停止が終わるまで待つ
. アプリケーション運用者はjn0005_fifが「強制停止済み」になること
. アプリケーション運用者はjn0005_fjnが「強制停止済み」になること
. アプリケーション運用者はjn0005が「強制停止済み」になること
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#finally内finally実行中に強制停止_ルートジョブネット指定
代替コースR2_13:retry2のjn0005_fif実行中にルートジョブネットを強制停止する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2,jn4,j41,j42,j43,j44,jn4_f,j44,j4,jn0005_f1,jn0005_f2が「正常終了」になっていることを確認する
. アプリケーション運用者はjn0005_fifが「強制停止中」になっていることを確認する
. アプリケーション運用者はjn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者はjn0005_fifの強制停止が終わるまで待つ
. アプリケーション運用者はjn0005_fifが「強制停止済み」になること
. アプリケーション運用者はjn0005_fjnが「強制停止済み」になること
. アプリケーション運用者はjn0005が「強制停止済み」になること
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する


== retry3 ==

#ジョブネットの中のジョブネット内にあるジョブをジョブを指定して強制停止
代替コースR3_1:retry2のjn111を実行中にjn111を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11,jn111が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が終わるまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「強制停止済み」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの中のジョブネット内にあるジョブを1つ上のジョブネットを指定して強制停止
代替コースR3_2:retry2のjn111を実行中にjn11を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11,jn111が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が終わるまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「強制停止済み」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの中のジョブネット内にあるジョブを２つ上のジョブネットを指定して強制停止
代替コースR3_3:retry2のjn111を実行中にjn1を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11,jn111が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が終わるまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「強制停止済み」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する

#ジョブネットの中のジョブネット内にあるジョブをルートジョブネットを指定して強制停止
代替コースR3_4:retry2のjn111を実行中にルートジョブネットを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が終わるまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「強制停止済み」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止済み」になっていることを確認する


= startingからdying  =
#startingからdyingに遷移する際の仕様は{アプリケーション開発者がTengineジョブを運用に耐えられるか検証する}に記述してあります。
#このユースケースでは、ジョブが強制停止によりstuckになった場合、ジョブネットがどう振る舞うべきかを記述しています
#ジョブが強制停止によって「不明」になる場合は、ジョブが「開始中」の際に行った場合です。2011/10/20現在では「開始中」ではPIDが
#ないためスクリプトを強制停止することができません。
== retry1 ==

#ジョブの状態が「開始中」で強制停止を行う
代替コースR1_:j1の状態が「開始中」にj1の強制停止を行う
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「強制停止中」になっていることを確認する
. アプリケーション運用者はj1の強制停止が失敗するまで待つ
. アプリケーション運用者はj1が「不明」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する

#ジョブの状態が「開始中」で強制停止を行う際に、別経路でジョブが実行されている
代替コースR1_:j2の状態が「開始中」にj2の強制停止を行う
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj1が「正常終了」になっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はj1の強制停止が失敗するまで待つ
. アプリケーション運用者はj2が「不明」になっていることを確認する
. アプリケーション運用者はj3が実行中になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[状態が「不明」なジョブあり]」になっていることを確認する
. アプリケーション運用者はj3が終わるまで待つ
. アプリケーション運用者はj3が「正常終了」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する

== retry2 ==

#「実行中[状態が「不明」なジョブあり]」が「実行中[異常あり]」で上書きされないか確認する
#ジョブネットの停止_単一指定_ジョブ指定でジョブネット稼働_稼働中のジョブが一つ_3経路動いているときに1経路目を強制停止→「不明」、2経路目を「正常終了」,３経路目を「異常終了」
代替コースR2_14:retry2のj2を開始状態で強制停止,「異常終了」したあとにj42を「正常終了」し,その後j43を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn4が実行中になっていることを確認する
. アプリケーション運用者はj42,43が実行中になっていることを確認する
. アプリケーション運用者はj44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj2の強制停止が失敗するまで待つ
. アプリケーション運用者はj2が「不明」になっていることを確認する
. アプリケーション運用者はjn4が実行中になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[状態が「不明」なジョブあり]」になっていることを確認する
. アプリケーション運用者はj42が終わるまで待つ
. アプリケーション運用者はj42が「正常終了」になっていることを確認する
. アプリケーション運用者はj44,jn4_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[状態が「不明」なジョブあり]」になっていることを確認する
. アプリケーション運用者はj43が終わるまで待つ
. アプリケーション運用者はj43が「異常終了」になっていることを確認する
. アプリケーション運用者はjn4が「異常終了」になっていることを確認する
. アプリケーション運用者はj4,jn0005_fjn,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する


#「実行中[異常あり]」が「実行中[状態が「不明」なジョブあり]」で上書きされるか確認する
#ジョブネットの停止_単一指定_ジョブ指定でジョブネット稼働_稼働中のジョブが一つ_3経路動いているときに1経路目を「異常終了」、2経路目を「正常終了」,３経路目を強制停止→「不明」
代替コースR2_15:retry2のj2が「異常終了」,「異常終了」したあとに開始状態のj43を強制停止して「不明」にし,その後j42が「正常終了」
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はj2が「異常終了」になっていることを確認する
. アプリケーション運用者はjn4が「強制停止中」になっていることを確認する
. アプリケーション運用者はj42が実行中になっていることを確認する
. アプリケーション運用者はj44,j4が「準備中」になっていることを確認する
. アプリケーション運用者はj43が「強制停止中」になっていることを確認する
. アプリケーション運用者はj43の強制停止が失敗するまで待つ
. アプリケーション運用者はj43が「不明」になっていることを確認する
. アプリケーション運用者はjn4が「実行中[状態が「不明」なジョブあり]」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「実行中[状態が「不明」なジョブあり]」になっていることを確認する
. アプリケーション運用者はj42が終わるまで待つ
. アプリケーション運用者はj42が「正常終了」になっていることを確認する
. アプリケーション運用者はj44,jn4_fが「準備中」になっていることを確認する
. アプリケーション運用者はjn4が「実行中[異常あり]」になっていることを確認する
. アプリケーション運用者はj4,jn0005_fjn,jn0005_fが「準備中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する


== retry3 ==


#ジョブネットの中のジョブネット内にあるジョブをジョブを指定して強制停止
代替コースR3_5:retry2のjn111を「開始中」にjn111を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11,jn111が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が失敗するまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「不明」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する

#ジョブネットの中のジョブネット内にあるジョブを1つ上のジョブネットを指定して強制停止
代替コース3_6:retry2のjn111を「開始中」にjn11を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11,jn111が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が失敗するまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「不明」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する

#ジョブネットの中のジョブネット内にあるジョブを２つ上のジョブネットを指定して強制停止
代替コースR3_:7retry2のjn111を「開始中」にjn1を強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11,jn111が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が失敗するまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「不明」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する

#ジョブネットの中のジョブネット内にあるジョブをルートジョブネットを指定して強制停止
代替コースR3_8:retry2のjn111を「開始中」にルートジョブネットを強制停止
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「強制停止中」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き強制停止したルートジョブネットの監視リンクをクリックし、ジョブネット監視画面を開く
. アプリケーション運用者はjn1,jn11が「強制停止中」になっていることを確認する
. アプリケーション運用者はjn111の強制停止が失敗するまで待つ
. アプリケーション運用者はjn1,jn11,jn111が「不明」になっていることを確認する
. アプリケーション運用者は実行ジョブ一覧画面を開き、強制停止を行ったルートジョブネットが「不明」になっていることを確認する
