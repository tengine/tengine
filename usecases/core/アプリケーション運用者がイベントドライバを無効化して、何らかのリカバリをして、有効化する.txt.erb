ユースケース名:
  アプリケーション運用者がイベントドライバを無効化して、何らかのリカバリをして、有効化する

このユースケースを呼び出すユースケース:
  * [アプリケーション運用者が発生した問題に対応する]
  * [アプリケーション運用者が本番環境をメンテナンスする]

背景:
  データに問題が発生してしまった一部に問題があった場合、その一部を無効にして、
  何らかの対処を行い、再度有効にすることが必要になる事もありえる。

概要:
  問題発生時に無効にする部分としてイベントドライバが適切な場合に、
  イベントドライバ管理画面で対象のイベントドライバを一旦無効にして、
  何らかの対処を行い、その後イベントドライバ管理画面で対象のイベントドライバを有効に戻す。


事前条件:
  アプリケーション運用者は何らかの手段でどのイベントドライバで問題が発生したのかを検知している
  Tengineコアプロセスが起動している

事後条件:


登場するコンポーネント:
  イベントドライバ管理画面

<%
  # この部分は[複雑なテストをどのように行うか先行して検討する]のためにテキトーに書いています。要修正
  patterns = [
    %w[DBのリストア],
    %w[DBのリストア DBのマイグレーション],
    %w[DBのマイグレーション],
  ]
  alt_course_origin = "D"
  alt_courses = {}
   patterns.each_with_index do |pattern, index|
     course_name = "代替コース" << (alt_course_origin.ord + index).chr
     alt_courses[course_name] = pattern
   end
%>

基本コース:
1. アプリケーション運用者は「イベントドライバ管理画面」で対象のイベントドライバを参照する
2. アプリケーション運用者は「イベントドライバ管理画面」で対象のイベントドライバを無効にする
3. 「イベントドライバ管理画面」は対象のイベントドライバが無効になったことを出力する [代替コースA, 代替コースB, 代替コースC]
4. アプリケーション運用者は「データリカバリスクリプト？」を実行して、データの確認を行う[<%= alt_courses.keys.join(" ") %>]
5. <戻り点:代替コースD以降>
6. アプリケーション運用者は「イベントドライバ管理画面」で対象のイベントドライバを有効にする
7. 「イベントドライバ管理画面」は対象のイベントドライバが有効になったことを出力する [代替コースA, 代替コースB, 代替コースC]


代替コースA: 「イベントドライバ管理画面」は対象のイベントハンドラが見つからないことを出力する
1. 「イベントドライバ管理画面」が対象のイベントドライバが見つからないことを出力する
2. アプリケーション運用者は「イベントドライバ管理画面」で対象となるイベントドライバを検索する...(この後どうする？)

代替コースB: 対象のイベントハンドラが既に無効になっていることを出力する
1. 「イベントドライバ管理画面」は対象のイベントハンドラが既に無効になっていることを出力する

代替コースC: 対象のイベントハンドラの更新処理に失敗したことを出力する
1. 「イベントドライバ管理画面」は対象のイベントハンドラの更新処理に失敗したことを出力する
2. アプリケーション運用者は原因の調査と復旧を行う
3. 基本コースの2に戻る

<% alt_courses.each_with_index do |(course_name, pattern), index| %>
<%= course_name %>: <%= pattern.join(",") %>を行う場合
<%= index + 1 %>. アプリケーション運用者は<%= pattern %>を行う
<%= alt_courses.length + 1%>. <戻り点:代替コースD以降>
<% end %>
