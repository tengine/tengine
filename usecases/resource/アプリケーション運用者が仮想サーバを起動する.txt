ユースケース名:
  アプリケーション運用者が仮想サーバを起動する

背景:
  分散バッチを実行するにはその実行環境をセットアップする必要がある。
  実行環境のセットアップは、
	・構成するサーバを起動する作業
	・設定を行う作業
	・起動したサーバ上で実行する分散バッチをデプロイする作業
	に分けられる。このユースケースでは
	・構成するサーバを起動する作業
	を扱う。

  構成する仮想サーバを起動し設定を行うに当たって、どの物理サーバ上で起動するのかを
  設定できなければならない。これは、例えばHadoopクラスタが動作する仮想サーバ群が
  ネットワーク的に離れた物理サーバ上で動作すると、ネットワーク的に近い場合に比べて
  余計に通信コストがかかってしまうためである。これを解決するために、仮想サーバを起動
  する際に物理サーバ（あるいは同じ物理サーバ）で仮想サーバを起動できるように指定する
  機能が必要である。

概要:
  アプリケーション運用者は、[物理サーバー一覧画面]で物理サーバーを、また[仮想サー
  バー制御画面]で物理サーバ上で起動している仮想サーバを確認した上で、起動する仮想
  サーバのイメージと台数、および利用する物理サーバを指定して起動をTengineに指示する。
  Tengineは仮想サーバ基盤にその内容を指示して、仮想サーバ基盤は仮想サーバの起動を開始する。

事前条件:
  Tengineがセットアップされている。
  Tengineと連携する仮想サーバ基盤がセットアップされている。
  制御対象の物理サーバが起動している。

成功時保証:
  アプリケーション運用者が指定した仮想サーバが全て起動していることを確認できる。

最低保証:
  なし

登場する画面:
  仮想サーバー制御画面
  物理サーバー閲覧画面

登場するコンポーネント:
  なし

登場するパッケージ:

登場するドキュメント:

基本コース:
 1. アプリケーション運用者は「仮想サーバー制御画面」を開く。<戻り点: 仮想サーバー制御画面の表示>
 2.{アプリケーション運用者が仮想サーバの状態を取得する}に遷移する。
 3.{アプリケーション運用者が物理サーバの状態を取得する}に遷移する。
 8.アプリケーション運用者は「仮想サーバー制御画面」上のリンクをクリックして「仮想サーバーイメージ一覧画面」に移動する。
 9.「仮想サーバーイメージ一覧画面」はTengineに仮想サーバーイメージの情報を問い合わせる。
10. Tengineは仮想サーバ基盤に仮想サーバーイメージの情報を問い合わせる。
11. 仮想サーバ基盤はTengineに管理下の仮想サーバーイメージのスペック情報を報告する。
12. Tengineは管理下の「仮想サーバーイメージ一覧画面」に仮想サーバイメージのスペック情報を報告する。
13.「仮想サーバー一覧画面」は仮想サーバイメージの情報を出力する。
14. アプリケーション運用者は「仮想サーバー一覧画面」を確認する。[代替コースC]
14.アプリケーション運用者は「仮想サーバー制御画面」上のリンクをクリックして「物理サーバー閲覧画面」に移動する。
15.「物理サーバー閲覧画面」はTengineに物理サーバのハードウェアスペック情報を問い合わせる。
16. Tengineは仮想サーバ基盤に物理サーバのハードウェアスペック情報を問い合わせる。
17. 仮想サーバ基盤はTengineに管理下の物理サーバのハードウェアスペック情報を報告する。
18. Tengineは管理下の「物理サーバー閲覧画面」に物理サーバのハードウェアスペック情報を報告する。
19.「物理サーバー閲覧画面」は物理サーバのハードウェアスペック情報を出力する。
20. アプリケーション運用者は「物理サーバー閲覧画面」を確認する。
21. アプリケーション運用者は「物理サーバー閲覧画面」上のリンクをクリックして「仮想サーバー制御画面」に移動する。
22. アプリケーション運用者は「物理サーバー閲覧画面」および「仮想サーバーイメージ一覧画面」から得られた情報を元に、どの物理サーバでどのイメージの仮想サーバを何台起動するかを決める。
23 . アプリケーション運用者は「仮想サーバー制御画面」から、どの物理サーバでどのイメージの仮想サーバを何台起動するか、およびそれぞれの仮想サーバの識別子を指示する。
24. 「仮想サーバー制御画面」はTengineにどの物理サーバでどのイメージの仮想サーバを何台起動するのか、およびそれぞれの仮想サーバの識別子を指示する。
25.  Tengineは仮想サーバ基盤にどの物理サーバでどのイメージの仮想サーバを何台起動するのかを指示する。
26. 仮想サーバ基盤は仮想サーバの起動を始めて、要求のあった仮想サーバ群の状態をTengineに報告する。
27. Tengineは要求のあった仮想サーバ群の状態を「仮想サーバー制御画面」に報告する。
28. 「仮想サーバー制御画面」は要求のあった仮想サーバ群の状態を出力する。
29. アプリケーション運用者は指示した通りの起動が行われているのかを「仮想サーバー制御画面」を開いて確認する。
30. アプリケーション運用者はすべての仮想サーバが起動し終えるの待つ。<戻り点：仮想サーバの起動確認>

代替コースC: 仮想サーバ制御基盤に登録されている仮想サーバイメージが0台である
*** 利用可能な仮想サーバーイメージが0台のときに画面表示に問題がないことを確認する
 1. アプリケーション運用者は「仮想サーバーイメージ一覧画面」で確認できる仮想サーバーイメージが0台であることを確認する。
*** 仮想サーバ制御基盤の確認が必要か？
 2. アプリケーション運用者は仮想サーバ制御基盤を確認し、問題を取り除く
 3. <戻り点: 仮想サーバー制御画面の表示>に遷移する。

代替コースD: 「仮想サーバー起動画面」で指定した仮想サーバが一台も起動しない
代替コースE: 「仮想サーバー起動画面」で指定した台数より少ない台数の仮想サーバが起動した
代替コースF: 「仮想サーバー起動画面」で指定した台数より多い台数の仮想サーバが起動した
代替コースG: 「仮想サーバー起動画面」で指定した物理サーバとは異なる物理サーバから仮想サーバが起動した
代替コースH: 「仮想サーバー起動画面」で指定したイメージとは異なるイメージ名が画面に表示された
代替コースI: 仮想サーバーの情報が一部取得できない（IPアドレス、ステータスを想定）
代替コースJ: 仮想サーバーの起動が完了しない（仮想サーバー基盤の情報が更新されない／仮想サーバーが指示なく停止する）

代替コースK: 仮想サーバーの起動が完了しない（Tengineリソースウォッチャデーモンが落ちている）
# 定期的にプロバイダの管理下にあるリソースの状態を問い合わせるTengineリソースウォッチャデーモンが停止している場合、
# サーバーの状態は仮想サーバーの状態は更新されない
1. アプリケーション運用者はコアサーバでTengineリソースウォッチャのログを確認する
2. アプリケーション運用者はコアサーバでTengineリソースウォッチャのログを元に問題を取り除く
3. アプリケーション運用者はコアサーバでTengineリソースウォッチャのプロセスを起動する
4. アプリケーション運用者はコアサーバでTengineリソースウォッチャのプロセスが起動していることを確認する
5. <戻り点：仮想サーバの起動確認>に遷移する
