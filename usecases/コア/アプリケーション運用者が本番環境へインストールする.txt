xユースケース名:
  アプリケーション運用者が本番環境へインストールする

背景:
  Tengineを導入することが決定した

概要:
  アプリケーション運用者がTengineを動かすためのソフトウェアのインストールおよびセットアップを行った後、
  テスト起動をおこなうことでTengineコアが正常に動作するための準備が完了したことを確認する

事前条件:
  DB、キュー、Tengineコア、Tenginのフロントエンドをインストールする対象となる全てのサーバが以下の条件を満たしている
    * ハードウェアの準備（電源接続、ケーブル配線、システムBIOS初期設定、ファームウェアのアップデート）が完了している
    * OSのインストールが完了している

事後条件:


登場するコンポーネント:
  なし

基本コース:
1. アプリケーション運用者がSCMサーバにSCMのインストールを行う　[代替コースA]
2. アプリケーション運用者がSCMサーバのSCMにリポジトリを作成する
3. アプリケーション運用者がSCMサーバのSCMに作成したリポジトリへアプリケーション開発者のアカウントを登録する
4. アプリケーション運用者がSCMサーバのSCMに作成したリポジトリへアプリケーション開発者のアカウントが登録されていることを確認する

5. アプリケーション運用者がDBサーバにDBのインストールを行う <戻り点: DBインストール>
6. アプリケーション運用者がDBサーバでDBのプロセスを起動する
7. アプリケーション運用者がDBサーバでDBのプロセスが起動していることを確認する
8. アプリケーション運用者がDBサーバでDBの冗長化の設定を行う [代替コースB, 代替コースC, 代替コースD]
9. アプリケーション運用者がDBサーバでDBの設定が反映されていることを確認する <戻り点: DB設定の確認>

10. アプリケーション運用者がキューサーバにキューのインストールを行う [代替コースE]
11. アプリケーション運用者がキューサーバでキューのプロセスの起動を行う <戻り点: キュープロセス起動>
12. アプリケーション運用者がキューサーバでキューのプロセスの起動を確認する
13. アプリケーション運用者がキューサーバにキューの冗長化の設定を行う
14. アプリケーション運用者がキューサーバにキューの冗長化の設定が反映されていることを確認する

15. アプリケーション運用者がコアサーバにTengineコアのインストールを行う [代替コースF]
16. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動する [代替コースH, 代替コースI, 代替コースJ]
  * インストールされていないことが原因
  * 設定が原因(DB接続)
  * バグが原因
17. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動を確認する <戻り点: Tengineコアプロセスの起動確認>

18. アプリケーション運用者がフロントエンドサーバにフロントエンドのインストールを行う [代替コースK]
19. アプリケーション運用者がフロントエンドサーバでフロントエンドのプロセスを起動する [代替コースM, 代替コースN]
  * 設定が原因(Tengineコア接続)
  * バグが原因
20. アプリケーション運用者がフロントエンドサーバでフロントエンドのプロセスが起動していることを確認する <戻り点: フロントエンドプロセスの起動確認>

21. アプリケーション運用者がテスト起動を行う [代替コースO, 代替コースP, 代替コースQ, 代替コースR]
22. アプリケーション運用者がテスト起動が成功することを確認する <戻り点: テスト起動の成功確認>
  * 設定が原因(キュー接続)
  * DBプロセスの停止が原因
  * キュープロセスの停止が原因
  * バグが原因


代替コースA: SCMサーバでSCMの外部サービスを利用する
1. アプリケーション運用者がSCMの外部サービスにサインアップする
2. アプリケーション運用者がSCMの外部サービスにログインする
3. アプリケーション運用者がSCMの外部サービスにリポジトリを作成する
4. アプリケーション運用者がSCMの外部サービスに作成したリポジトリへアプリケーション開発者のアカウントを登録する
5. アプリケーション運用者がSCMの外部サービスに作成したリポジトリへアプリケーション開発者のアカウントが登録されていることを確認する
6. <戻り点: DBインストール>に遷移する


代替コースB: DBの冗長化と分割データ配置(シャーディング)の設定
1. アプリケーション運用者がDBサーバでDBの冗長化の設定を行う
2. アプリケーション運用者がDBサーバでDBの分割データ配置(シャーディング)の設定を行う
3. <戻り点: DB設定の確認>に遷移する


代替コースC: DBの冗長化と自動バックアップの設定
1. アプリケーション運用者がDBサーバでDBの冗長化の設定を行う
2. アプリケーション運用者がDBサーバでDBの自動バックアップの設定を行う
3. <戻り点: DB設定の確認>に遷移する


代替コースD: DBの冗長化と分割データ配置(シャーディング)と自動バックアップの設定
1. アプリケーション運用者がDBサーバでDBの冗長化の設定を行う
2. アプリケーション運用者がDBサーバでDBの分割データ配置(シャーディング)の設定を行う
3. アプリケーション運用者がDBサーバでDBの自動バックアップの設定を行う
4. <戻り点: DB設定の確認>に遷移する


代替コースE: 運用中に当初想定を大きく上回るメッセージのデータ量が発生した場合に備え、動的にパーティションの容量を変更するために、キューの格納領域をLVMで設定する
1. アプリケーション運用者がキューサーバでLVMの設定を行う
2. アプリケーション運用者がキューサーバにキューのインストールを行う
3. <戻り点: キュープロセス起動>


代替コースF: Tengineコアのインストールに失敗する
1. アプリケーション運用者がコアサーバでTengineコアのインストールに失敗する
2. アプリケーション運用者がコアサーバでTengineコアのインストール時の出力結果を確認する
3. アプリケーション運用者がTengineサポート窓口へ問い合わせる [代替コースFA]
4. ユースケースは終了する

代替コースFA: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がTengineユーザグループへ問い合わせる
2. ユースケースは終了する


代替コースH: Tengineコアのプロセスの起動に失敗する(インストールが原因)
1. アプリケーション運用者がコアサーバでTengineコアのプロセスの起動コマンドが見つからない
2. アプリケーション運用者がコアサーバのTengineコアをインストールする
3. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動する
4. <戻り点: Tengineコアプロセスの起動確認>に遷移する


代替コースI: Tengineコアのプロセスの起動に失敗する(設定が原因)
1. アプリケーション運用者がコアサーバでTengineコアのプロセスの起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのログを確認する
3. アプリケーション運用者がコアサーバのTengineコアの設定を修正する
4. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動する
5. <戻り点: Tengineコアプロセスの起動確認>に遷移する


代替コースJ: Tengineコアのプロセスの起動に失敗する(バグが原因)
1. アプリケーション運用者がコアサーバでTengineコアのプロセスの起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのログを確認する
3. アプリケーション運用者がTengineサポート窓口へ問い合わせる [代替コースJA]
4. ユースケースは終了する

代替コースJA: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がTengineユーザグループへ問い合わせる
2. ユースケースは終了する


代替コースK: フロントエンドのインストールに失敗する(未対応OS／バグが原因)
1. アプリケーション運用者がフロントエンドサーバのフロントエンドのインストールに失敗する
1. アプリケーション運用者がフロントエンドサーバのフロントエンドのインストール時の出力結果を確認する
3. アプリケーション運用者がTengineサポート窓口へ問い合わせる [代替コースKA]
4. ユースケースは終了する

代替コースKA: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がTengineユーザグループへ問い合わせる
2. ユースケースは終了する


代替コースM: フロントエンドのプロセスの起動に失敗する(設定が原因)
1. アプリケーション運用者がフロントエンドサーバでフロントエンドのプロセスの起動に失敗する
2. アプリケーション運用者がフロントエンドサーバでフロントエンドのログを確認する
3. アプリケーション運用者がフロントエンドサーバのフロントエンドの設定を修正する
4. アプリケーション運用者がフロントエンドサーバでフロントエンドのプロセスを起動する
5. <戻り点: フロントエンドプロセスの起動確認>に遷移する


代替コースN: フロントエンドのプロセスの起動に失敗する(バグが原因)
1. アプリケーション運用者がフロントエンドサーバでフロントエンドのプロセスの起動に失敗する
2. アプリケーション運用者がフロントエンドサーバでフロントエンドのログを確認する
3. アプリケーション運用者がTengineサポート窓口へ問い合わせる [代替コースNA]
4. ユースケースは終了する

代替コースNA: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がTengineユーザグループへ問い合わせる
2. ユースケースは終了する


代替コースO: テスト起動に失敗する(設定が原因)
1. アプリケーション運用者がテスト起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのログを確認する
3. アプリケーション運用者がコアサーバのTengineコアの設定を修正する
4. アプリケーション運用者がコアサーバでTengineコアのプロセスを再起動する
5. アプリケーション運用者がテスト起動する
6. <戻り点: テスト起動の成功確認>に遷移する


代替コースP: テスト起動に失敗する(DBプロセスの停止が原因)
1. アプリケーション運用者がテスト起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのログを確認する
3. アプリケーション運用者がDBサーバのDBのプロセスを起動する
4. アプリケーション運用者がテスト起動する
5. <戻り点: テスト起動の成功確認>に遷移する


代替コースQ: テスト起動に失敗する(キュープロセスの停止が原因)
1. アプリケーション運用者がテスト起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのログを確認する
3. アプリケーション運用者がキューサーバのキューのプロセスを起動する
4. アプリケーション運用者がテスト起動する
5. <戻り点: テスト起動の成功確認>に遷移する


代替コースR: テスト起動に失敗する(バグが原因)
1. アプリケーション運用者がテスト起動に失敗する
2. アプリケーション運用者がテスト起動時の出力結果を確認する
3. アプリケーション運用者がTengineサポート窓口へ問い合わせる [代替コースRA]
4. ユースケースは終了する

代替コースRA: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がTengineユーザグループへ問い合わせる
2. ユースケースは終了する


注記:
  なし
