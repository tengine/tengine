ユースケース名:
  アプリケーション運用者が本番環境へインストールする

背景:
  なし

概要:
  アプリケーション運用者がTengineを動かすためのソフトウェアとTengineコアのインストールおよびセットアップを行った後、
  Tengineコアが提供するテスト起動を使用することでTengineコアが正常に動作するための準備が完了したことを確認する

事前条件:
  任意のストレージ、SCM、DB、キュー、Tengineコア、Tenginコンソールを使用およびインストールする対象となる全てのサーバが以下の条件を満たしている
    * ハードウェアの準備（電源接続、ケーブル配線、システムBIOS初期設定、ファームウェアのアップデート）が完了している
    * OSのインストールが完了している
    * ネットワークの接続が完了している

事後条件:
  なし

登場するパッケージ:
  SCM
  DB
  キュー
  Tengineコア
  Tengineコンソール

登場するコンポーネント:
  テスト用のイベントハンドラ

登場するドキュメント:
  運用者向けTengineマニュアル


基本コース:
1. アプリケーション運用者が任意のストレージをアプリケーション開発者が作成するイベントハンドラ定義のデプロイ先として利用出来るようにする [代替コースA, 代替コースB]
2. アプリケーション運用者が任意のストレージをイベントハンドラ定義のファイルの読込み先として利用出来るようにする

3. アプリケーション運用者がDBサーバにDBのインストールを行う <戻り点: DBインストール>
4. アプリケーション運用者がDBサーバでDBのプロセスを起動する
5. アプリケーション運用者がDBサーバでDBのプロセスが起動していることを確認する
6. アプリケーション運用者が必要に応じてDBサーバでDBの冗長化の設定を行う
7. アプリケーション運用者が必要に応じてDBサーバでDBの分割データ配置(シャーディング)の設定を行う
8. アプリケーション運用者が必要に応じてDBサーバでDBの自動バックアップの設定を行う
9. アプリケーション運用者がDBサーバでDBの設定が反映されていることを確認する

10. アプリケーション運用者がキューサーバにキューのインストールを行う [代替コースC]
11. アプリケーション運用者がキューサーバでキューのプロセスの起動を行う <戻り点: キュープロセス起動>
12. アプリケーション運用者がキューサーバでキューのプロセスの起動を確認する
13. アプリケーション運用者が必要に応じてキューサーバでキューの冗長化の設定を行う
14. アプリケーション運用者がキューサーバでキューの設定が反映されていることを確認する

15. アプリケーション運用者がコアサーバにTengineコアのインストールを行う [代替コースD]
16. アプリケーション運用者がコアサーバでTengineコアのセットアップを行う [代替コースE]
17. アプリケーション運用者がコアサーバでテスト起動を行う [代替コースF] <戻り点: テスト起動>
18. アプリケーション運用者がコアサーバでテスト起動が成功することを確認する <戻り点: テスト起動の成功確認>
19. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動する [代替コースG]
20. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動を確認する <戻り点: Tengineコアプロセスの起動確認>

21. アプリケーション運用者がTengineコンソールサーバにTengineコンソールのインストールを行う [代替コースH]
22. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのプロセスを起動する [代替コースI]
23. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのプロセスが起動していることを確認する <戻り点: Tengineコンソールプロセスの起動確認>
24. アプリケーション運用者がTengineコンソールのイベント管理画面が表示できることを確認する


代替コースA: 任意のストレージにSCMを利用する
1. アプリケーション運用者がSCMサーバにSCMをインストールする
2. アプリケーション運用者がSCMサーバでSCMをアプリケーション開発者が利用出来るようにする
3. <戻り点: DBインストール>に遷移する


代替コースB: 任意のストレージに外部のSCMサービスを利用する
1. アプリケーション運用者が外部のSCMサービスにサインアップする
2. アプリケーション運用者が外部のSCMサービスにログインする
3. アプリケーション運用者が外部のSCMサービスをアプリケーション開発者が利用出来るようにする
4. <戻り点: DBインストール>に遷移する


代替コースC: 運用中に当初想定を大きく上回るメッセージのデータ量が発生した場合に備え、動的にパーティションの容量を変更するために、キューの格納領域をLVMで設定する
1. アプリケーション運用者がキューサーバでLVMの設定を行う
2. アプリケーション運用者がキューサーバにキューのインストールを行う
3. <戻り点: キュープロセス起動>


代替コースD: Tengineコアのインストールに失敗する
1. アプリケーション運用者がコアサーバでTengineコアのインストールに失敗する
2. アプリケーション運用者がコアサーバでTengineコアのインストール時の出力結果を確認する
3. アプリケーション運用者がコアサーバでTengineコアのインストール時の出力結果を元に問題を取り除く [代替コースY]
4. アプリケーション運用者がコアサーバでTengineコアのインストールを行う
5. <戻り点: Tengineコアプロセスの起動>に遷移する


代替コースE: 複数のTengineコアのセットアップを行う
1. アプリケーション運用者がコアサーバでTengineコアのセットアップを行う
2. アプリケーション運用者がコアサーバで設定を動的に行い複数のTengineコアに配布する
3. <戻り点: テスト起動>に遷移する


代替コースF: テスト起動に失敗する
1. アプリケーション運用者がコアサーバでテスト起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのログを確認する
3. アプリケーション運用者がコアサーバのTengineコアのログを元に問題を取り除く [代替コースY]
4. アプリケーション運用者がコアサーバでテスト起動を行う
5. <戻り点: テスト起動の成功確認>に遷移する


代替コースG: Tengineコアのプロセスの起動に失敗する(設定が原因)
1. アプリケーション運用者がコアサーバでTengineコアのプロセスの起動に失敗する
2. アプリケーション運用者がコアサーバでTengineコアのプロセス起動時の出力結果を確認する
3. アプリケーション運用者がコアサーバでTengineコアのプロセス起動時の出力結果を元に問題を取り除く [代替コースY]
4. アプリケーション運用者がコアサーバでTengineコアのプロセスを起動する
5. <戻り点: Tengineコアプロセスの起動確認>に遷移する


代替コースH: Tengineコンソールのインストールに失敗する
1. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのインストールに失敗する
2. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのインストール時の出力結果を確認する
3. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのインストール時の出力結果を元に問題を取り除く [代替コースY]
4. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのインストールを行う
5. <戻り点: Tengineコンソールプロセスの起動>に遷移する


代替コースI: Tengineコンソールのプロセスの起動に失敗する
1. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのプロセスの起動に失敗する
2. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのプロセス起動時の出力結果を確認する
3. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのプロセス起動時の出力結果を元に問題を取り除く [代替コースY]
4. アプリケーション運用者がTengineコンソールサーバでTengineコンソールのプロセスを起動する
5. <戻り点: Tengineコンソールプロセスの起動確認>に遷移する


代替コースY: Tengineサポート窓口へ問い合わせる
1. アプリケーション運用者がサーバ構成レポート収集ツールでサーバ構成の内容を収集する
2. アプリケーション運用者がTengineサポート窓口へ問い合わせる [代替コースZ]
3. ユースケースは終了する


代替コースZ: Tengineユーザグループへ問い合わせる
1. アプリケーション運用者がTengineユーザグループへ問い合わせる
2. ユースケースは終了する


注記:
  なし
